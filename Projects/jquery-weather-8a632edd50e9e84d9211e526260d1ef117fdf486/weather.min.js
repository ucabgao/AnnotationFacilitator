/*! another AMD compatible weather plugin - v0.2.2 - 2013-05-14
* Copyright (c) 2013 Dan Heberden; Licensed MIT */
(function(e){function n(e){var n=function(n,r){var o=e.Deferred(),i=o.promise();return"array"===e.type(n)?(i=i.then(function(){return e.ajax({url:"http://maps.googleapis.com/maps/api/geocode/json?latlng="+n.join(",")+"&sensor=false"}).then(function(n){var r,o=n&&n.results[0]&&n.results[0].address_components;return e.each(o,function(e,n){n.types&&"postal_code"===n.types[0]&&(r=n.short_name)}),r?e.Deferred().resolve(r):e.Deferred().reject("no zip found")})}),o.resolve()):o.resolve(n),i=i.then(function(n){return e.ajax({url:"http://query.yahooapis.com/v1/public/yql?q=select%20item%20from%20weather.forecast%20where%20location="+n+"&format=json"})},function(){return e.Deferred.reject("error")}),i.done(function(e){if(e&&e.query&&e.query.results&&e.query.results.channel&&e.query.results.channel.item){var n=e.query.results.channel.item;n.condition.symbols=t[n.condition.code],n.condition.symbolLevel=s[n.condition.code]||"normal",r(null,n)}else r("no results")}).fail(function(e){r(e)}),i};return n}var r,o,t=[],s=[],i={":(":[0,1,2],"☈":[3,4,37,38,39,45,47],"☀":[32,36],"☁":[26,27,28,29,30,44],"☂":[5,6,9,10,11,12,14,35,40,42,45,47],"❄":[5,6,7,8,13,14,15,16,17,18,35,41,42,43,46],"☼":[25,31,33,34],"≈":[20,21,22,23,24],":::":[19],"☰":[15,24],"¯\\_(ツ)_/¯":[3200]},u={light:[9,13,14,29,30,37,38,30,40,42,44],heavy:[0,2,3,11,12,15,16,24,26,36,41]};for(var a in i)for(r=i[a],o=0;r.length>o;o++){var l=r[o];t[l]||(t[l]=[]),t[l].push(a)}for(var c in u)for(r=u[c],o=0;r.length>o;o++)s[r[o]]=c;"function"==typeof define&&define.amd?define(["jquery"],function(e){return new n(e)}):e.weather=new n(jQuery)})(this);